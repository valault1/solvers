import { generateBoardFromSeedStatic } from "domains/Queens/helpers/boardGenerators/generateNewBoard";
import {
  getDailyBoardProgressFromIndex,
  getStorageTimeObject,
} from "domains/Queens/helpers/localStorageHelper";
import { placeQueen } from "domains/Queens/helpers/solver/solveBoard";

export const START_DATE = "07/03/24";

export const getDayIndex = () => {
  const daysSinceStart = Math.floor(
    (new Date().getTime() - new Date(START_DATE).getTime()) /
      (1000 * 60 * 60 * 24)
  );
  // mod it by the length of daily boards. This way if we run out, it doesn't error.
  const index = daysSinceStart % DAILY_BOARDS.length;
  return index;
};

export const getDailyBoard = () => {
  // this is a rough estimate. todo when I have internet: make this a subtract function between the dates.
  const index = getDayIndex();
  const { size, seed }: DailyBoard = DAILY_BOARDS[index];
  const board = generateBoardFromSeedStatic(
    size || DEFAULT_DAILY_BOARD_SIZE,
    seed
  );

  const progress = getDailyBoardProgress();
  if (progress.isFinished) {
    progress.starPositions?.forEach(({ row, col }) =>
      placeQueen(board, row, col)
    );
  }

  return board;
};

export const getDailyBoardProgress = () => {
  return getDailyBoardProgressFromIndex({ dayIndex: getDayIndex() });
};

export const hasFinishedDailyBoard = () => {
  const obj = getDailyBoardProgress();
  return obj?.isFinished;
};
//12x12: 8390994, 4376997, 6512049, 8451710, 4227743,4971802, 3733057,
//10x10: 7593202, 2149748, 3686519, 2109389, 4478942, 7957770, 4575896,
export const DEFAULT_DAILY_BOARD_SIZE = 12;
export type DailyBoard = { seed: number; size?: number };

export const DAILY_BOARDS: DailyBoard[] = [
  { seed: 8390994 },
  { seed: 4376997 },
  { seed: 6512049 },
  // these ones below are from the 12x12s, ranked hardest
  { seed: 1534501 },
  { seed: 5573928 },
  // Mon 7-8
  { seed: 7793051 },
  { seed: 7666922 },
  { seed: 5054487 },
  { seed: 8285092 },
  { seed: 7549850 },
  { seed: 9213069 },
  { seed: 2373100 },
  // Mon 7-15
  { seed: 23274371, size: 12 },
  { seed: 15429603, size: 12 },
  { seed: 9119419, size: 12 },
  { seed: 16734086, size: 12 },
  { seed: 20509635, size: 12 },
  { seed: 13224072, size: 12 },
  { seed: 21859859, size: 12 },
  // Mon 7-22
  { seed: 8820044, size: 12 },
  { seed: 21498105, size: 12 },
  { seed: 15387055, size: 12 },
  { seed: 10213093, size: 12 },
  { seed: 5942342, size: 12 },
  { seed: 18412658, size: 12 },
  { seed: 17817122, size: 12 },
  // Mon 7-29
  { seed: 11895471, size: 12 },
  { seed: 3505610, size: 12 },
  { seed: 14164239, size: 12 },
  { seed: 16044558, size: 12 },
  { seed: 3055762, size: 12 },
  { seed: 1382221, size: 12 },
  { seed: 17138816, size: 12 },
  { seed: 7793051, size: 12 },
  { seed: 19483865, size: 12 },
  { seed: 11191431, size: 12 },
  { seed: 7066612, size: 12 },
  { seed: 12300783, size: 12 },
  { seed: 539259, size: 12 },
  { seed: 148279, size: 12 },
  { seed: 11830625, size: 12 },
  { seed: 8560004, size: 12 },
  { seed: 9604068, size: 12 },
  { seed: 5932315, size: 12 },
  { seed: 4411695, size: 12 },
  { seed: 8945774, size: 12 },
  { seed: 301916, size: 12 },
  { seed: 17213413, size: 12 },
  { seed: 17808758, size: 12 },
  { seed: 23342267, size: 12 },
  { seed: 19865816, size: 12 },
  { seed: 9591507, size: 12 },
  { seed: 15975033, size: 12 },
  { seed: 17606213, size: 12 },
  { seed: 17901944, size: 12 },
  { seed: 1874815, size: 12 },
  { seed: 20574439, size: 12 },
  { seed: 219348, size: 12 },
  { seed: 3060291, size: 12 },
  { seed: 14156769, size: 12 },
  { seed: 19314443, size: 12 },
  { seed: 23190262, size: 12 },
  { seed: 4816788, size: 12 },
  { seed: 16205298, size: 12 },
  { seed: 21362398, size: 12 },
  { seed: 849814, size: 12 },
  { seed: 18314861, size: 12 },
  { seed: 10083017, size: 12 },
  { seed: 14321341, size: 12 },
  { seed: 11789796, size: 12 },
  { seed: 5098055, size: 12 },
  { seed: 18721264, size: 12 },
  { seed: 19853949, size: 12 },
  { seed: 5114025, size: 12 },
  { seed: 2921307, size: 12 },
  { seed: 8367223, size: 12 },
  { seed: 15527582, size: 12 },
  { seed: 8661428, size: 12 },
  { seed: 23194103, size: 12 },
  { seed: 19148768, size: 12 },
  { seed: 879536, size: 12 },
  { seed: 9252626, size: 12 },
  { seed: 9799264, size: 12 },
  { seed: 11231073, size: 12 },
  { seed: 20613984, size: 12 },
  { seed: 12857049, size: 12 },
  { seed: 12902200, size: 12 },
  { seed: 2815426, size: 12 },
  { seed: 1480181, size: 12 },
  { seed: 7719350, size: 12 },
  { seed: 18458834, size: 12 },
  { seed: 22687366, size: 12 },
  { seed: 11855882, size: 12 },
  { seed: 22896039, size: 12 },
  { seed: 19457974, size: 12 },
  { seed: 17750049, size: 12 },
  { seed: 7012322, size: 12 },
  { seed: 8934116, size: 12 },
  { seed: 6895797, size: 12 },
  { seed: 5572356, size: 12 },
  { seed: 23028562, size: 12 },
  { seed: 1226409, size: 12 },
  { seed: 7894030, size: 12 },
  { seed: 10020561, size: 12 },
  { seed: 3944199, size: 12 },
  { seed: 13646666, size: 12 },
  { seed: 2312074, size: 12 },
  { seed: 17105690, size: 12 },
  { seed: 9551749, size: 12 },
  { seed: 3583663, size: 12 },
  { seed: 15822369, size: 12 },
  { seed: 1534501, size: 12 },
  { seed: 7997702, size: 12 },
  { seed: 17909450, size: 12 },
  { seed: 5118283, size: 12 },
  { seed: 12601851, size: 12 },
  { seed: 7554309, size: 12 },
  { seed: 7417293, size: 12 },
  { seed: 16506869, size: 12 },
  { seed: 6352865, size: 12 },
  { seed: 5199474, size: 12 },
  { seed: 14890132, size: 12 },
  { seed: 18763286, size: 12 },
  { seed: 13618861, size: 12 },
  { seed: 9549120, size: 12 },
  { seed: 16584198, size: 12 },
  { seed: 2431922, size: 12 },
  { seed: 1185424, size: 12 },
  { seed: 10372372, size: 12 },
  { seed: 12049576, size: 12 },
  { seed: 15261670, size: 12 },
  { seed: 5573928, size: 12 },
  { seed: 1081222, size: 12 },
  { seed: 17303427, size: 12 },
  { seed: 11687135, size: 12 },
  { seed: 4953387, size: 12 },
  { seed: 1408638, size: 12 },
  { seed: 21549338, size: 12 },
  { seed: 5503030, size: 12 },
  { seed: 9465824, size: 12 },
  { seed: 16184138, size: 12 },
  { seed: 15032283, size: 12 },
  { seed: 18415362, size: 12 },
  { seed: 6518071, size: 12 },
  { seed: 7712957, size: 12 },
  { seed: 4375200, size: 12 },
  { seed: 16406437, size: 12 },
  { seed: 12232252, size: 12 },
  { seed: 21634857, size: 12 },
  { seed: 19862995, size: 12 },
  { seed: 3419506, size: 12 },
  { seed: 13860547, size: 12 },
  { seed: 14835887, size: 12 },
  { seed: 124081, size: 12 },
  { seed: 4006814, size: 12 },
  { seed: 8494657, size: 12 },
  { seed: 11958037, size: 12 },
  { seed: 20485412, size: 12 },
  { seed: 8146261, size: 12 },
  { seed: 813653, size: 12 },
  { seed: 6462560, size: 12 },
  { seed: 8032615, size: 12 },
  { seed: 15546108, size: 12 },
  { seed: 9491932, size: 12 },
  { seed: 10699688, size: 12 },
  { seed: 5813858, size: 12 },
  { seed: 8805787, size: 12 },
  { seed: 7666922, size: 12 },
  { seed: 16365974, size: 12 },
  { seed: 11466302, size: 12 },
  { seed: 2176173, size: 12 },
  { seed: 15293698, size: 12 },
  { seed: 1655222, size: 12 },
  { seed: 16488799, size: 12 },
  { seed: 13877496, size: 12 },
  { seed: 5851128, size: 12 },
  { seed: 3292102, size: 12 },
  { seed: 6617775, size: 12 },
  { seed: 3810889, size: 12 },
  { seed: 9611120, size: 12 },
  { seed: 9094358, size: 12 },
  { seed: 117765, size: 12 },
  { seed: 4577006, size: 12 },
  { seed: 14807931, size: 12 },
  { seed: 17547308, size: 12 },
  { seed: 19377202, size: 12 },
  { seed: 924912, size: 12 },
  { seed: 18138977, size: 12 },
  { seed: 3526031, size: 12 },
  { seed: 17696630, size: 12 },
  { seed: 2420162, size: 12 },
  { seed: 3799661, size: 12 },
  { seed: 4706188, size: 12 },
  { seed: 7852114, size: 12 },
  { seed: 8336541, size: 12 },
  { seed: 1795317, size: 12 },
  { seed: 21102712, size: 12 },
  { seed: 1177701, size: 12 },
  { seed: 17072016, size: 12 },
  { seed: 2644309, size: 12 },
  { seed: 16037879, size: 12 },
  { seed: 1846325, size: 12 },
  { seed: 943856, size: 12 },
  { seed: 21890619, size: 12 },
  { seed: 5380661, size: 12 },
  { seed: 8320112, size: 12 },
  { seed: 20451406, size: 12 },
  { seed: 22115008, size: 12 },
  { seed: 10609698, size: 12 },
  { seed: 15802744, size: 12 },
  { seed: 5724972, size: 12 },
  { seed: 8669071, size: 12 },
  { seed: 3177428, size: 12 },
];
